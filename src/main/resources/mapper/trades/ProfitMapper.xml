<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.comdosoft.financial.manage.mapper.trades.ProfitMapper">
  <resultMap id="BaseResultMap" type="com.comdosoft.financial.manage.domain.trades.Profit">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="trade_record_id" jdbcType="INTEGER" property="tradeRecordId" />
    <result column="terminal_number" jdbcType="VARCHAR" property="terminalNumber" />
    <result column="current_agent_id" jdbcType="INTEGER" property="currentAgentId" />
    <result column="top_agent_id" jdbcType="INTEGER" property="topAgentId" />
    <result column="amount" jdbcType="INTEGER" property="amount" />
    <result column="profits_get" jdbcType="INTEGER" property="profitsGet" />
    <result column="profits_pay" jdbcType="INTEGER" property="profitsPay" />
    <result column="status" jdbcType="TINYINT" property="status" />
    <result column="factory_id" jdbcType="INTEGER" property="factoryId" />
    <result column="types" jdbcType="TINYINT" property="types" />
    <result column="pay_channel_id" jdbcType="INTEGER" property="payChannelId" />
    <result column="merchant_id" jdbcType="INTEGER" property="merchantId" />
    <result column="traded_at" jdbcType="TIMESTAMP" property="tradedAt" />
    <result column="created_at" jdbcType="TIMESTAMP" property="createdAt" />
    <result column="updated_at" jdbcType="TIMESTAMP" property="updatedAt" />
    <result column="account_number" jdbcType="VARCHAR" property="accountNumber" />
  </resultMap>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from profits
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.comdosoft.financial.manage.domain.trades.Profit">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into profits (id, trade_record_id, terminal_number, 
      current_agent_id, top_agent_id, amount, 
      profits_get, profits_pay, status, 
      factory_id, types, pay_channel_id, 
      merchant_id, traded_at, created_at, 
      updated_at, account_number)
    values (#{id,jdbcType=INTEGER}, #{tradeRecordId,jdbcType=INTEGER}, #{terminalNumber,jdbcType=VARCHAR}, 
      #{currentAgentId,jdbcType=INTEGER}, #{topAgentId,jdbcType=INTEGER}, #{amount,jdbcType=INTEGER}, 
      #{profitsGet,jdbcType=INTEGER}, #{profitsPay,jdbcType=INTEGER}, #{status,jdbcType=TINYINT}, 
      #{factoryId,jdbcType=INTEGER}, #{types,jdbcType=TINYINT}, #{payChannelId,jdbcType=INTEGER}, 
      #{merchantId,jdbcType=INTEGER}, #{tradedAt,jdbcType=TIMESTAMP}, #{createdAt,jdbcType=TIMESTAMP}, 
      #{updatedAt,jdbcType=TIMESTAMP}, #{accountNumber,jdbcType=VARCHAR})
  </insert>
  <update id="updateByPrimaryKey" parameterType="com.comdosoft.financial.manage.domain.trades.Profit">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update profits
    set trade_record_id = #{tradeRecordId,jdbcType=INTEGER},
      terminal_number = #{terminalNumber,jdbcType=VARCHAR},
      current_agent_id = #{currentAgentId,jdbcType=INTEGER},
      top_agent_id = #{topAgentId,jdbcType=INTEGER},
      amount = #{amount,jdbcType=INTEGER},
      profits_get = #{profitsGet,jdbcType=INTEGER},
      profits_pay = #{profitsPay,jdbcType=INTEGER},
      status = #{status,jdbcType=TINYINT},
      factory_id = #{factoryId,jdbcType=INTEGER},
      types = #{types,jdbcType=TINYINT},
      pay_channel_id = #{payChannelId,jdbcType=INTEGER},
      merchant_id = #{merchantId,jdbcType=INTEGER},
      traded_at = #{tradedAt,jdbcType=TIMESTAMP},
      created_at = #{createdAt,jdbcType=TIMESTAMP},
      updated_at = #{updatedAt,jdbcType=TIMESTAMP},
      account_number = #{accountNumber,jdbcType=VARCHAR}
    where id = #{id,jdbcType=INTEGER}
  </update>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, trade_record_id, terminal_number, current_agent_id, top_agent_id, amount, 
    profits_get, profits_pay, status, factory_id, types, pay_channel_id, merchant_id, 
    traded_at, created_at, updated_at, account_number
    from profits
    where id = #{id,jdbcType=INTEGER}
  </select>
  <select id="selectAll" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select id, trade_record_id, terminal_number, current_agent_id, top_agent_id, amount, 
    profits_get, profits_pay, status, factory_id, types, pay_channel_id, merchant_id, 
    traded_at, created_at, updated_at, account_number
    from profits
  </select>
  
  <select id="selectByTradeRecordId" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    select id, trade_record_id, terminal_number, current_agent_id, top_agent_id, amount,
    profits_get, profits_pay, status, factory_id, types, pay_channel_id, merchant_id,
    traded_at, created_at, updated_at, account_number
    from profits
    where trade_record_id = #{tradeRecordId}
  </select>

    <select id="selectStatistics" resultType="java.util.Map">
        select p.top_agent_id as agent_id,count(*) as nums,sum(p.amount) as amounts,
          sum(p.profits_get) as gets,sum(p.profits_pay) as pays
        from profits p
        group by p.top_agent_id
    </select>
</mapper>